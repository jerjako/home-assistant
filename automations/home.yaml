- id: hassio-startup
  alias: Startup Notification
  trigger:
    - platform: homeassistant
      event: start
  action:
    - service: notify.ios
      data:
        message: "System started"

- id: hassio-shutdown
  alias: Shutdown Notification
  trigger:
    - platform: homeassistant
      event: shutdown
  action:
    - service: notify.ios
      data:
        message: "System shutdown"

- id: hassio-update-notif
  alias: Update Notification
  trigger:
    - platform: state
      entity_id: updater.updater
  action:
    - service: notify.ios
      data:
        message: "Update Available"

- id: hassio-login-failed
  alias: Login Failure
  hide_entity: True
  trigger:
    - platform: template
      value_template: "{{ states('persistent_notification.httplogin') != 'authentication' }}"
  action:
    - service: notify.ios
      data:
        message: "Login failed"

- id: daily_backup_and_cleaning
  alias: Daily Backup
  trigger:
    platform: time
    at: '03:00:00'
  action:
    - service: hassio.snapshot_full
      data_template:
        name: Automated Backup {{ now().strftime('%Y-%m-%d') }}
    - service: notify.ios
      data_template:
        message: Creating backup named "Automated Backup {{ now().strftime('%Y-%m-%d') }}"
    - service: shell_command.delete_old_snapshots
    - delay: '00:30:00'
    - service: hassio.addon_stdin
      data:
        addon: "7be23ff5_dropbox_sync"
        input: {"command":"upload"}

- id: xiaomi_switch_1
  alias: Switch 1
  trigger:
    - platform: event
      event_type: click
      event_data:
        entity_id: binary_sensor.xiaomi_aqara__home__switch_1
        click_type: single
  action:
    - service: notify.ios
      data:
        message: "Switch 1"

- id: xiaomi_switch_2
  alias: Switch 2
  trigger:
    - platform: event
      event_type: click
      event_data:
        entity_id: binary_sensor.xiaomi_aqara__home__switch_2
        click_type: single
  action:
    - service: notify.ios
      data:
        message: "Switch 2"
